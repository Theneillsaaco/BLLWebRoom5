---
import Layout from "../../layouts/Layout.astro";
import { getCollection } from "astro:content";

export async function getStaticPaths(){
    const posts = await getCollection("blogs");
    return posts.map(post => ({
        params: { slug: post.slug },
        props: { post }
    }));
}

const { post } = Astro.props;

const { Content } = await post.render();
---

<Layout title={post.data.title}>
    <article class="max-w-3xl mx-auto px-6 py-16">
        <!-- Titulo -->
        <h1 class="text-4xl font-bold mb-4 text-primary-600">
            {post.data.title}
        </h1>

        <!-- Metadatos -->
        <div class="flex items-center gap-4 text-sm text-gray-500 mb-8">
            <span>✍ {post.data.author}</span>
            <span>📅 {post.data.date}</span>
        </div>

        <!-- Imagen -->
        {post.data.image && (
            <img
                transition:name={`post-image-${post.slug}`}
                src={post.data.image}
                alt={post.data.title}
                class="w-full h-80 object-cover rounded-xl shadow-lg mb-10"
            />
        )}

        <!-- Contenido del post -->
        <div class="prose prose-lg prose-primary max-w-none">
            <Content />
        </div>
    </article>
</Layout>
